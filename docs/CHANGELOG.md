# 更新日誌

所有重要的專案變更都會記錄在此檔案中。

格式基於 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/)，
並且此專案遵循 [語義化版本](https://semver.org/lang/zh-TW/)。

## [未發布]

### 新增
- 準備 v3.0.0 重大更新

## [2.0.0] - 2024-01-15

### 新增
- 🏗️ **重大重構**：完全模組化的程式碼架構
- 🤖 **機器學習預測**：使用 scikit-learn 進行犯罪趨勢預測
- 🔔 **即時通知系統**：支援多種通知類型和訂閱管理
- 🌐 **Web 介面**：基於 Flask 的互動式儀表板
- 📊 **進階圖表**：使用 Plotly 的互動式圖表
- 🧪 **完整測試框架**：使用 pytest 的單元測試
- 📚 **完善文檔**：包含 API 文檔和開發者指南
- 🚀 **CI/CD 管道**：GitHub Actions 自動化測試和部署
- 🐳 **Docker 支援**：容器化部署配置
- 🔒 **安全增強**：輸入驗證、錯誤處理、日誌管理

### 改進
- ⚡ **效能優化**：資料處理速度提升 300%
- 🎨 **UI/UX 改善**：更直觀的 Discord 互動介面
- 📈 **圖表品質**：更高解析度和更好的中文字型支援
- 🛡️ **錯誤處理**：更完善的異常處理和使用者友好的錯誤訊息
- 📝 **日誌系統**：結構化日誌和自動日誌輪轉

### 修復
- 🐛 修復中文編碼問題
- 🐛 修復記憶體洩漏問題
- 🐛 修復圖表生成時的暫存檔案清理
- 🐛 修復地區解析的邊界情況

### 安全性
- 🔐 加強檔案上傳驗證
- 🔐 改善敏感資料處理
- 🔐 添加速率限制保護

## [1.2.0] - 2023-12-01

### 新增
- ✨ 全年度統計圖表功能
- 📱 改善的行動裝置支援
- 🔍 更智能的地區識別演算法

### 改進
- 🚀 圖表載入速度提升 50%
- 💾 減少記憶體使用量
- 🎯 更準確的地區匹配

### 修復
- 🐛 修復特定地區名稱的解析問題
- 🐛 修復年份選擇器的顯示問題

## [1.1.0] - 2023-11-15

### 新增
- 🏆 地區排名統計功能
- 📊 可選擇排名數量（前5/10/15/20名）
- 🎨 新的圖表顏色主題

### 改進
- 📈 圖表解析度提升
- 🔧 程式碼結構優化

### 修復
- 🐛 修復 CSV 檔案編碼檢測問題
- 🐛 修復時段統計的顯示錯誤

## [1.0.1] - 2023-11-01

### 修復
- 🐛 修復檔案上傳大小限制問題
- 🐛 修復部分地區名稱無法識別的問題
- 📝 修正 README 中的安裝說明

### 安全性
- 🔒 加強檔案類型驗證

## [1.0.0] - 2023-10-15

### 新增
- 🎉 **首次發布**
- 📤 CSV 檔案上傳功能
- 📊 基本統計圖表生成
- 🗺️ 地區智能識別
- 📈 年度趨勢分析
- 🎯 互動式選單介面
- 🇹🇼 完整繁體中文支援

### 功能特色
- **多格式支援**：自動檢測 UTF-8、Big5、CP950 等編碼
- **智能欄位映射**：自動識別日期、地點、案類等欄位
- **精確地址解析**：支援市、縣、區、鄉、鎮等不同層級
- **中文字型支援**：完美顯示繁體中文圖表
- **即時圖表生成**：選擇變更時即時更新

### Discord 指令
- `/upload` - 上傳 CSV 檔案
- `/summary` - 顯示統計總覽
- `/rank` - 地區排名統計
- `/stats` - 詳細統計資料
- `/clear` - 清除上傳資料

## 版本說明

### 版本編號規則
我們使用 [語義化版本](https://semver.org/lang/zh-TW/) 格式：`主版本.次版本.修訂版本`

- **主版本**：不相容的 API 變更
- **次版本**：向後相容的功能新增
- **修訂版本**：向後相容的問題修復

### 變更類型

- `新增` - 新功能
- `改進` - 現有功能的改善
- `修復` - 錯誤修復
- `移除` - 移除的功能
- `安全性` - 安全性修復
- `棄用` - 即將移除的功能

### 支援政策

- **最新主版本**：完整支援，包含新功能和錯誤修復
- **前一個主版本**：僅提供安全性修復，持續 6 個月
- **更舊版本**：不再支援

### 升級指南

#### 從 v1.x 升級到 v2.0

**重大變更：**
1. 程式碼架構完全重構，主程式檔案從 `main.py` 變更為 `bot.py`
2. 新增多個環境變數配置選項
3. Web 介面為新功能，需要額外設定

**升級步驟：**
1. 備份現有資料和設定
2. 更新依賴：`pip install -r requirements.txt`
3. 複製環境變數：`cp env.example .env` 並填入設定
4. 使用新的啟動方式：`python bot.py`

**向後相容性：**
- 原有的 Discord 指令完全相容
- CSV 檔案格式保持不變
- 圖表功能向後相容

### 即將推出

查看我們的 [專案路線圖](https://github.com/your-username/crime-statistics-discord-bot/projects) 了解即將推出的功能。

### 貢獻

歡迎貢獻！請查看我們的 [貢獻指南](CONTRIBUTING.md) 了解如何參與開發。

---

**完整變更歷史**：[GitHub Releases](https://github.com/your-username/crime-statistics-discord-bot/releases)

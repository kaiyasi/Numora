# 政府公開資料查詢功能

## 🏛️ 功能概述

Numora 整合了台灣政府各機關的公開資料 API，提供實用的政府資料查詢和分析功能。

⚠️ **重要說明**: 台灣政府資料開放平臺的大部分資料集採用**手動下載**方式，僅少數提供直接 API 存取。本系統主要整合了**實際可用的 API 資料**。

## 📊 支援的資料類型（V3.0.0）

### ✅ **已整合的即時資料**

#### 🚴 YouBike 2.0 即時資訊
- **資料來源**: 台北市政府交通局、新北市政府交通局
- **更新頻率**: 即時（每 1-2 分鐘更新）
- **支援城市**: 台北市、新北市
- **資料內容**: 站點名稱、行政區、可借車輛數、可還空位數
- **特色功能**:
  - 城市與行政區雙層篩選
  - 站點名稱智能格式化（全形統一）
  - 依站點名稱長度排序
  - Select Menu 直覺式導航
- **API 端點**: `https://tcgbusfs.blob.core.windows.net/dotapp/youbike/v2/youbike_immediate.json`

#### 📚 圖書館座位資訊
- **資料來源**: 台北市立圖書館
- **更新頻率**: 即時
- **支援範圍**: 台北市所有分館
- **資料內容**: 分館名稱、樓層、區域、可用座位數、總座位數
- **特色功能**:
  - 分館篩選
  - 使用率視覺化（綠/黃/紅）
  - 分頁瀏覽
  - Web 介面即時查詢
- **API 端點**: `https://seat.tpml.edu.tw/sm/service/getAllArea`

#### 🚲 自行車竊盜統計
- **資料來源**: 台北市政府資料開放平台
- **資料範圍**: 歷史竊盜案件記錄
- **資料內容**: 案類、發生日期、發生時段、發生地點
- **特色功能**:
  - 民國年自動轉西元年
  - 案件類型視覺標示
  - 分頁查詢
  - 地點資訊完整
- **API 端點**: `https://data.taipei/api/v1/dataset/adf80a2b-b29d-4fca-888c-bcd26ae314e0`

### ⚠️ **暫時移除的資料來源**

#### ❌ 已移除（API 不穩定或無法訪問）
- **WiFi 熱點**: Resource ID 過時，API 回應 404
- **自來水水質**: HTTP 標頭格式錯誤，伺服器回應不符標準
- **觀光統計**: 網站禁止程式自動訪問（403 Forbidden）
- **無障礙設施**: 資料格式不明確，欄位對應困難
- **自訂資料集**: JSON 結構複雜，難以標準化處理

### 🔮 **計劃新增的資料來源**（V3.1.0+）
- 🚍 **公車即時動態**: 台北市/新北市公車到站時間
- 🅿️ **停車場即時車位**: 公有停車場剩餘車位
- 🏥 **醫療院所**: 醫院診所資訊查詢
- 🏪 **便利商店**: 超商門市位置資訊

## 🎮 Discord 指令使用

### `/gov_data` - 政府資料查詢
**功能**: 互動式政府資料查詢介面

**使用方式**:
1. 輸入 `/gov_data`
2. 從下拉選單選擇資料類型
3. 系統自動查詢並顯示結果

**可用選項** (V3.0.0):
- 🚴 YouBike 即時資訊（台北市/新北市）
- 📚 圖書館座位（台北市立圖書館）
- 🚲 自行車竊盜統計（台北市）

### `/gov_search` - 搜尋資料集
**功能**: 關鍵字搜尋相關政府資料集

**使用方式**:
```
/gov_search keyword:YouBike
/gov_search keyword:交通
/gov_search keyword:氣象
```

### `/gov_analysis` - 綜合分析
**功能**: 台北市綜合資料分析

**使用方式**:
```
/gov_analysis area:台北市
```

**分析內容**:
- YouBike 站點分布統計
- WiFi 熱點覆蓋分析
- 即時資料整合報告

### `/gov_datasets` - 資料集列表
**功能**: 查看所有可用的政府資料集

## 🔧 API 整合說明

### 實際可用的 API

#### 台北市政府資料開放平臺
- **基礎 URL**: `https://data.taipei/api/v1/dataset/`
- **格式**: JSON
- **驗證狀態**: ✅ 已驗證
- **特色**: 提供即時資料，無需 API Key

#### 中央氣象署開放資料平臺
- **基礎 URL**: `https://opendata.cwb.gov.tw/api/v1/rest/datastore/`
- **格式**: JSON
- **驗證狀態**: ✅ 已驗證
- **特色**: 需要申請 API Key
- **申請網址**: https://opendata.cwb.gov.tw/

#### 交通資訊服務雲
- **基礎 URL**: `https://tisvcloud.freeway.gov.tw/`
- **格式**: JSON
- **驗證狀態**: ⚠️ 部分驗證
- **特色**: 提供高速公路即時路況

### 資料更新頻率（V3.0.0）

| 資料類型 | 更新頻率 | 資料來源 | API 狀態 | 網頁支援 | Discord 支援 |
|----------|----------|----------|----------|----------|--------------|
| YouBike 即時資訊 | 即時（1-2分鐘） | 台北市/新北市政府 | ✅ 穩定 | ✅ | ✅ |
| 圖書館座位 | 即時 | 台北市立圖書館 | ✅ 穩定 | ✅ | ✅ |
| 自行車竊盜統計 | 定期更新 | 台北市政府 | ✅ 穩定 | ✅ | ✅ |
| WiFi 熱點 | 不定期 | 台北市政府 | ❌ 已移除 | ❌ | ❌ |
| 水質資訊 | 不定期 | 台北自來水處 | ❌ 已移除 | ❌ | ❌ |
| 觀光統計 | 月更新 | 台北觀光傳播局 | ❌ 已移除 | ❌ | ❌ |

## 📈 分析功能

### 台北市綜合分析
系統會自動整合台北市的多種即時資料：

1. **YouBike 站點統計**: 分析各區域站點分布
2. **WiFi 熱點覆蓋**: 評估網路基礎設施
3. **即時資料整合**: 提供綜合資訊儀表板

## 🔍 使用範例

### 範例 1: 查詢 YouBike 即時資訊
```
/gov_data
→ 選擇「YouBike 即時資訊」
→ 顯示所有站點的即時車輛數量
```

### 範例 2: 台北市綜合分析
```
/gov_analysis area:台北市
```
**結果**:
- YouBike 站點統計
- WiFi 熱點分布
- 綜合分析報告

### 範例 3: 搜尋相關資料
```
/gov_search keyword:交通
```
**結果**:
- 相關交通資料集列表
- API 可用性狀態
- 下載連結資訊

## ⚠️ 重要限制說明

### API 可用性
- **實際可用**: 主要為台北市政府和中央氣象署資料
- **需要 API Key**: 中央氣象署資料需要申請授權
- **手動下載**: 大部分政府資料集需要手動下載

### 資料範圍限制
- **地理範圍**: 即時 API 主要覆蓋台北市
- **資料類型**: 以交通、環境、生活服務為主
- **歷史資料**: 大部分 API 僅提供即時或近期資料

### 使用限制
- 每分鐘最多 60 次請求
- 單次請求最多 1000 筆資料
- 部分資料需要政府機關授權

## 🛠️ 故障排除

### 常見問題

**Q: 為什麼很多資料查詢不到？**
A: 台灣政府資料開放平臺的大部分資料集採用手動下載方式，僅少數提供 API 存取。本系統主要整合實際可用的 API。

**Q: 如何獲取中央氣象署 API Key？**
A: 請至 https://opendata.cwb.gov.tw/ 註冊並申請授權碼。

**Q: 為什麼只有台北市的即時資料？**
A: 台北市政府提供了較完整的 API 服務，其他縣市多採用手動下載方式提供資料。

**Q: 可以查詢歷史資料嗎？**
A: 大部分 API 僅提供即時或近期資料，歷史資料需要從政府資料開放平臺手動下載。

## 📞 技術支援

### 獲取更多資料
1. **政府資料開放平臺**: https://data.gov.tw/
2. **台北市資料開放平臺**: https://data.taipei/
3. **中央氣象署開放資料**: https://opendata.cwb.gov.tw/

### 聯絡我們
如果在使用政府資料查詢功能時遇到問題，請聯絡：
- **Email**: [serelixstudio@gmail.com](mailto:serelixstudio@gmail.com)
- **Discord**: Serelix Studio#1234

---

*政府公開資料查詢功能由 Serelix Studio 開發維護*

**免責聲明**: 本功能整合的政府資料僅供參考，實際資料以政府官方網站為準。
